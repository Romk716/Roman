# Модуль «Сервис задач»

## Описание
Модуль предназначен для управления списком задач: создание, изменение статуса, просмотр, поиск, сохранение в JSON-файл.

## Границы ответственности
**Модуль делает:**
- хранит задачи в оперативной памяти и сохраняет их в JSON-файл;
- позволяет создавать задачу с названием и описанием;
- позволяет изменять статус задачи;
- возвращает список всех задач или отфильтрованный по статусу;
- позволяет искать задачи по ключевому слову в названии или описании;
- загружает задачи из JSON-файла при запуске.

**Модуль НЕ делает:**
- не предоставляет графический интерфейс;
- не управляет пользователями и правами доступа;
- не работает по сети;
- не поддерживает многопользовательский режим.

## Допущения и ограничения
- Максимальное количество задач не ограничено (ограничивается только доступной памятью).
- Допустимые статусы задачи: `"новая"`, `"в работе"`, `"завершена"`. Другие статусы не поддерживаются.
- Текст задачи (название и описание) можно изменять после создания (требование на изменение текста может быть добавлено позже, в текущей версии редактирование не предусмотрено).
- Уникальность задачи обеспечивается автоматически генерируемым числовым идентификатором (ID). Две задачи могут иметь одинаковое название, но ID всегда уникален.
- Если файл JSON отсутствует при запуске, модуль создаёт пустой список задач и при первом сохранении создаст файл.
- Если файл JSON повреждён (не является валидным JSON или не соответствует ожидаемой структуре), модуль считает, что задач нет, и начинает работу с пустым списком. При сохранении перезаписывает файл корректными данными.
- Поиск по ключевому слову не учитывает регистр (регистронезависимый).

## Функциональные требования

1. Модуль должен позволять создать задачу с названием (строка) и описанием (строка).
2. При создании задачи модуль автоматически присваивает ей уникальный числовой идентификатор.
3. Модуль должен позволять получить список всех задач.
4. Модуль должен позволять получить задачу по её идентификатору.
5. Модуль должен позволять изменить статус задачи на один из допустимых: «новая», «в работе», «завершена».
6. Модуль не должен позволять изменить статус на недопустимое значение (должен возвращать ошибку или игнорировать).
7. Модуль должен позволять получить список задач, отфильтрованный по статусу.
8. Модуль должен позволять искать задачи по ключевому слову: если ключевое слово встречается в названии или описании (без учёта регистра), задача включается в результат.
9. При создании задачи модуль должен автоматически сохранять все задачи в JSON-файл.
10. При изменении статуса задачи модуль должен автоматически сохранять обновлённые данные в JSON-файл.
11. При запуске модуль должен загружать задачи из JSON-файла, если файл существует и корректен.
12. Если файл JSON отсутствует, модуль должен стартовать с пустым списком задач.
13. Если файл JSON повреждён, модуль должен стартовать с пустым списком задач и при сохранении перезаписать файл корректными данными.

## Требования к данным и формату хранения

- Файл с задачами называется `tasks.json` и располагается в текущей рабочей директории (там же, откуда запущен скрипт).
- Данные хранятся в формате JSON.
- Корневой элемент — массив объектов.
- Каждый объект задачи содержит следующие поля:
  - `id`: число (уникальный идентификатор)
  - `title`: строка (название задачи)
  - `description`: строка (описание)
  - `status`: строка, одно из значений: `"новая"`, `"в работе"`, `"завершена"`

Пример содержимого `tasks.json`:
```json
[
  {
    "id": 1,
    "title": "Купить продукты",
    "description": "Молоко, хлеб, яйца",
    "status": "новая"
  },
  {
    "id": 2,
    "title": "Сдать отчёт",
    "description": "Подготовить презентацию",
    "status": "в работе"
  }
]
```
#### 5.5. Требования к обработке ошибок и исключений

Опишите, что происходит в проблемных ситуациях. Можно оформить как таблицу или список.

```markdown
## Обработка ошибок и исключений

| Ситуация | Реакция модуля |
|----------|----------------|
| Попытка создать задачу с пустым названием | Модуль возвращает ошибку (например, исключение или код результата) и не создаёт задачу |
| Попытка изменить статус на недопустимый | Модуль возвращает ошибку, статус не меняется |
| Запрос задачи по несуществующему ID | Модуль возвращает `null` или ошибку «не найдено» |
| Файл JSON отсутствует при запуске | Модуль работает с пустым списком, при сохранении создаёт файл |
| Файл JSON повреждён (непарсится) | Модуль работает с пустым списком, при сохранении перезаписывает файл |

## Критерии приёмки

1. После создания задачи она отображается в списке всех задач и сохраняется в файл `tasks.json`.
2. После перезапуска модуля и загрузки из файла все задачи сохраняют свои поля и статусы.
3. Фильтрация по статусу возвращает только задачи с указанным статусом.
4. Поиск по ключевому слову находит задачи независимо от регистра и включает задачи, где слово есть в названии или описании.
5. При попытке создать задачу без названия модуль сообщает об ошибке и не создаёт задачу.
6. При повреждённом JSON-файле модуль запускается без ошибок, начинает с пустым списком и при сохранении создаёт корректный файл.
```
